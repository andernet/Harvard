<!DOCTYPE html>
<!-- saved from url=(0050)https://cs50.harvard.edu/web/2020/projects/3/mail/ -->
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:description" content="This course picks up where Harvard University&#39;s CS50 leaves off, diving more deeply into the design and implementation of web apps with Python, JavaScript, and SQL using frameworks like Flask, Django, and Bootstrap. Topics include database design, scalability, security, and user experience. Through hands-on projects, students learn to write and use APIs, create interactive UIs, and leverage cloud services like GitHub and Heroku. By semester&#39;s end, students emerge with knowledge and experience in principles, languages, and tools that empower them to design and deploy applications on the Internet.">

<meta property="og:image" content="https://img.youtube.com/vi/24Kf3v7kZyE/maxresdefault.jpg"><meta property="og:title" content="Mail - CS50&#39;s Web Programming with Python and JavaScript"><link href="https://cs50.harvard.edu/web/2020/favicon.ico?1598454302" rel="icon">

<!-- http://getbootstrap.com/docs/4.5/getting-started/introduction/ -->
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/jquery.min.js.download"></script>
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/popper.min.js.download"></script>
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/bootstrap.min.js.download"></script>

<!-- https://bootstrap-table.com/docs/getting-started/introduction/ -->
<link href="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/bootstrap-table.min.css" rel="stylesheet">
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/bootstrap-table.min.js.download"></script>
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/bootstrap-table-mobile.min.js.download"></script>

<!-- https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use -->
<link href="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/all.min.css" rel="stylesheet">

<!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/moment.min.js.download"></script>
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/moment-timezone-with-data.min.js.download"></script>
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/luxon.min.js.download"></script>



<link href="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/page.css" rel="stylesheet">
<script src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/jekyll-theme-cs50.js.download"></script>

<title>Mail - CS50's Web Programming with Python and JavaScript</title>
</head>

    <body>

        

        <div class="container-fluid">

            <div class="row">

                <aside class="col-md" style="height: 567px; top: 0px;">
 
                    <header><h1 data-id="cs50s-web-programming-with-python-and-javascript"><a href="https://cs50.harvard.edu/web/2020/">CS50’s Web Programming with Python and JavaScript</a></h1>

<p>OpenCourseWare</p>

<p><a href="https://brianyu.me/">Brian Yu</a><br>
<a href="mailto:brian@cs.harvard.edu">brian@cs.harvard.edu</a></p>

<p><a href="https://cs.harvard.edu/malan/">David J. Malan</a><br>
<a href="mailto:malan@harvard.edu">malan@harvard.edu</a><br>
<a href="https://www.facebook.com/dmalan" class="mr-2"><i class="fab fa-facebook-f"></i></a><a href="https://github.com/dmalan" class="mr-2"><i class="fab fa-github"></i></a><a href="https://www.instagram.com/davidjmalan/" class="mr-2"><i class="fab fa-instagram"></i></a><a href="https://www.linkedin.com/in/malan/" class="mr-2"><i class="fab fa-linkedin"></i></a><a href="https://www.quora.com/profile/David-J-Malan" class="mr-2"><i class="fab fa-quora"></i></a><a href="https://www.reddit.com/user/davidjmalan" class="mr-2"><i class="fab fa-reddit-alien"></i></a><a href="https://twitter.com/davidjmalan" class="mr-2"><i class="fab fa-twitter"></i></a></p></header>

                    

                    <button aria-controls="nav" aria-expanded="false" class="btn btn-sm collapsed d-md-none" data-target="aside &gt; nav" data-toggle="collapse">
                        Menu
                    </button>

                    <nav class="collapse d-md-block" id="nav"><hr>

<ol start="0">
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/0/">HTML, CSS</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/1/">Git</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/2/">Python</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/3/">Django</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/4/">SQL, Models, and Migrations</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/5/">JavaScript</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/6/">User Interfaces</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/7/">Testing, CI/CD</a></li>
  <li><a href="https://cs50.harvard.edu/web/2020/weeks/8/">Scalability and Security</a></li>
</ol>

<hr>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.harvard.edu/web/2020/certificate/">CS50 Certificate</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.harvard.edu/web/2020/faqs/">FAQs</a></li>
</ul>

<hr>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.harvard.edu/web/ed">Ed Discussion</a> for Q&amp;A</li>
  <li data-marker="*" class="small"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://us.edstem.org/quickstart/ed-discussion.pdf">Quick Start Guide</a></li>
</ul>

<hr>

<ul class="small fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.edx.org/web">edX</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://itunes.apple.com/us/course/id1505432709">iTunes U</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.youtube.com/playlist?list=PLhQjrBD2T380xvFSUmToMMzERZ3qB5Ueu">YouTube</a></li>
</ul>

<hr>

<ul class="small fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.noticeable.io/">Changelog</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.statuspage.io/">Status Page</a></li>
</ul>

<hr>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>
    <p><a href="https://cs50.harvard.edu/web/2020/communities/">Communities</a></p>
  </li>
</ul>

<ul class="small fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://discord.gg/cs50">Discord</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.facebook.com/groups/cs50/">Facebook Group</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.facebook.com/cs50/">Facebook Page</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://github.com/cs50">GitHub</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://gitter.im/cs50/x">Gitter</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://instagram.com/cs50">Instagram</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.linkedin.com/groups/7437240/">LinkedIn Group</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.linkedin.com/school/CS50/">LinkedIn Page</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.quora.com/topic/CS50">Quora</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://cs50.edx.org/slack">Slack</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://www.snapchat.com/add/cs50">Snapchat</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="https://twitter.com/cs50">Twitter</a></li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><a href="http://www.youtube.com/subscription_center?add_user=cs50tv">YouTube</a></li>
</ul>

<hr>

<p><a href="https://cs50.harvardshop.com/"><img src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/GGMdcKt.png" alt="Harvard Shop"></a></p>

<hr>

<p><a href="https://cs50.harvard.edu/web/2020/license/" class="small"><i class="fab fa-creative-commons mr-1"></i>License</a></p></nav>

                    <footer></footer>

                </aside>

                <main class="col-md markdown-body" style="margin-bottom: 0px; margin-top: 0px;">

                    <a data-id="" id="mail" style="top: 0px;"></a><h1><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#mail">Mail</a></h1>

<p>Design a front-end for an email client that makes API calls to send and receive emails.</p>

<p><img src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/inbox.png" alt="Inbox page"></p>

<p><img src="./Mail - CS50&#39;s Web Programming with Python and JavaScript_files/email.png" alt="Email page"></p>

<a data-id="" id="getting-started" style="top: 0px;"></a><h2><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#getting-started">Getting Started</a></h2>

<ol>
  <li>Download the distribution code from <a href="https://cdn.cs50.net/web/2020/spring/projects/3/mail.zip">https://cdn.cs50.net/web/2020/spring/projects/3/mail.zip</a> and unzip it.</li>
  <li>In your terminal, <code class="highlighter-rouge">cd</code> into the <code class="highlighter-rouge">project3</code> directory.</li>
  <li>Run <code class="highlighter-rouge">python manage.py makemigrations mail</code> to make migrations for the <code class="highlighter-rouge">mail</code> app.</li>
  <li>Run <code class="highlighter-rouge">python manage.py migrate</code> to apply migrations to your database.</li>
</ol>

<a data-id="" id="understanding" style="top: 0px;"></a><h2><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#understanding">Understanding</a></h2>

<p>In the distribution code is a Django project called <code class="highlighter-rouge">project3</code> that contains a single app called <code class="highlighter-rouge">mail</code>.</p>

<p>First, after making and applying migrations for the project, run <code class="highlighter-rouge">python manage.py runserver</code> to start the web server. Open the web server in your browser, and use the “Register” link to register for a new account. The emails you’ll be sending and receiving in this project will be entirely stored in your database (they won’t actually be sent to real email servers), so you’re welcome to choose any email address (e.g. <code class="highlighter-rouge">foo@example.com</code>) and password you’d like for this project: credentials need not be valid credentials for actual email addresses.</p>

<p>Once you’re signed in, you should see yourself taken to the Inbox page of the mail client, though this page is mostly blank (for now). Click the buttons to navigate to your Sent and Archived mailboxes, and notice how those, too, are currently blank. Click the “Compose” button, and you’ll be taken to a form that will let you compose a new email. Each time you click a button, though, you’re not being taken to a new route or making a new web request: instead, this entire application is just a single page, with JavaScript used to control the user interface. Let’s now take a closer look at the distribution code to see how that works.</p>

<p>Take a look at <code class="highlighter-rouge">mail/urls.py</code> and notice that the default route loads an <code class="highlighter-rouge">index</code> function in <code class="highlighter-rouge">views.py</code>. So let’s up <code class="highlighter-rouge">views.py</code> and look at the <code class="highlighter-rouge">index</code> function. Notice that, as long as the user is signed in, this function renders the <code class="highlighter-rouge">mail/inbox.html</code> template. Let’s look at that template, stored at <code class="highlighter-rouge">mail/templates/mail/inbox.html</code>. You’ll notice that in the body of the page, the user’s email address is first displayed in an <code class="highlighter-rouge">h2</code> element. After that, the page has a sequence of buttons for navigating between various pages of the app. Below that, notice that this page has two main sections, each defined by a <code class="highlighter-rouge">div</code> element. The first (with an <code class="highlighter-rouge">id</code> of <code class="highlighter-rouge">emails-view</code>)  contains the content of an email mailbox (initially empty). The second (with an <code class="highlighter-rouge">id</code> of <code class="highlighter-rouge">compose-view</code>) contains a form where the user can compose a new email. The buttons along the top, then, need to selectively show and hide these views: the compose button, for example, should hide the <code class="highlighter-rouge">emails-view</code> and show the <code class="highlighter-rouge">compose-view</code>; the inbox button, meanwhile, should hide the <code class="highlighter-rouge">compose-view</code> and show the <code class="highlighter-rouge">emails-view</code>.</p>

<p>How do they do that? Notice at the bottom of <code class="highlighter-rouge">inbox.html</code>, the JavaScript file <code class="highlighter-rouge">mail/inbox.js</code> is included. Open that file, stored at <code class="highlighter-rouge">mail/static/mail/inbox.js</code>, and take a look. Notice that when the DOM content of the page has been loaded, we attach event listeners to each of the buttons. When the <code class="highlighter-rouge">inbox</code> button is clicked, for example, we call the <code class="highlighter-rouge">load_mailbox</code> function with the argument <code class="highlighter-rouge">'inbox'</code>; when the <code class="highlighter-rouge">compose</code> button is clicked, meanwhile, we call the <code class="highlighter-rouge">compose_email</code> function. What do these functions do? The <code class="highlighter-rouge">compose_email</code> function first hides the <code class="highlighter-rouge">emails-view</code> (by setting its <code class="highlighter-rouge">style.display</code> property to <code class="highlighter-rouge">none</code>) and shows the <code class="highlighter-rouge">compose-view</code> (by setting its <code class="highlighter-rouge">style.display</code> property to <code class="highlighter-rouge">block</code>). After that, the function takes all of the form input fields (where the user might type in a recipient email address, subject line, and email body) and sets their value to the empty string <code class="highlighter-rouge">''</code> to clear them out. This means that every time you click the “Compose” button, you should be presented with a blank email form: you can test this by typing values into form, switching the view to the Inbox, and then switching back to the Compose view.</p>

<p>Meanwhile, the <code class="highlighter-rouge">load_mailbox</code> function first shows the <code class="highlighter-rouge">emails-view</code> and hides the <code class="highlighter-rouge">compose-view</code>. The <code class="highlighter-rouge">load_mailbox</code> function also takes an argument, which will be the name of the mailbox that the user is trying to view. For this project, you’ll design an email client with three mailboxes: an <code class="highlighter-rouge">inbox</code>, a <code class="highlighter-rouge">sent</code> mailbox of all sent mail, and an <code class="highlighter-rouge">archive</code> of emails that were once in the inbox but have since been archived. The argument to <code class="highlighter-rouge">load_mailbox</code>, then, will be one of those three values, and the <code class="highlighter-rouge">load_mailbox</code> function displays the name of the selected mailbox by updating the <code class="highlighter-rouge">innerHTML</code> of the <code class="highlighter-rouge">emails-view</code> (after capitalizing the first character). This is why, when you choose a mailbox name in the browser, you see the name of that mailbox (capitalized) appear in the DOM: the <code class="highlighter-rouge">load_mailbox</code> function is updating the <code class="highlighter-rouge">emails-view</code> to include the appropriate text.</p>

<p>Of course, this application is incomplete. All of the mailboxes simply show the name of the mailbox (Inbox, Sent, Archive) but don’t actually show any emails yet. There’s no view yet to actually see the contents of any email. And the compose form will let you type in the contents of an email, but the button to send the email doesn’t actually do anything. That’s where you come in!</p>

<a data-id="" id="api" style="top: 0px;"></a><h3><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#api">API</a></h3>

<p>You’ll get mail, send mail, and update emails by using this application’s API. We’ve written the entire API for you (and documented it below), so that you can use it in your JavaScript code. (In fact, note that we have written <strong>all</strong> of the Python code for you for this project. You should be able to complete this project by just writing HTML and JavaScript).</p>

<p>This application supports the following API routes:</p>

<a data-id="" id="get-emailsstrmailbox" style="top: 0px;"></a><h4><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#get-emailsstrmailbox"><code class="highlighter-rouge">GET /emails/&lt;str:mailbox&gt;</code></a></h4>

<p>Sending a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/&lt;mailbox&gt;</code> where <code class="highlighter-rouge">&lt;mailbox&gt;</code> is either <code class="highlighter-rouge">inbox</code>, <code class="highlighter-rouge">sent</code>, or <code class="highlighter-rouge">archive</code> will return back to you (in JSON form) a list of all emails in that mailbox, in reverse chronological order. For example, if you send a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/inbox</code>, you might get a JSON response like the below (representing two emails):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
    {
        "id": 100,
        "sender": "foo@example.com",
        "recipients": ["bar@example.com"],
        "subject": "Hello!",
        "body": "Hello, world!",
        "timestamp": "Jan 2 2020, 12:00 AM",
        "read": false,
        "archived": false
    },
    {
        "id": 95,
        "sender": "baz@example.com",
        "recipients": ["bar@example.com"],
        "subject": "Meeting Tomorrow",
        "body": "What time are we meeting?",
        "timestamp": "Jan 1 2020, 12:00 AM",
        "read": true,
        "archived": false
    }
]
</code></pre></div></div>

<p>Notice that each email specifies its <code class="highlighter-rouge">id</code> (a unique identifier), a <code class="highlighter-rouge">sender</code> email address, an array of <code class="highlighter-rouge">recipients</code>, a string for <code class="highlighter-rouge">subject</code>, <code class="highlighter-rouge">body</code>, and <code class="highlighter-rouge">timestamp</code>, as well as two boolean values indicating whether the email has been <code class="highlighter-rouge">read</code> and whether the email has been <code class="highlighter-rouge">archived</code>.</p>

<p>How would you get access to such values in JavaScript? Recall that in JavaScript, you can use <code class="highlighter-rouge">fetch</code> to make a web request. Therefore, the following JavaScript code</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/emails/inbox</span><span class="dl">'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">emails</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Print emails</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emails</span><span class="p">);</span>

    <span class="c1">// ... do something else with emails ...</span>
<span class="p">});</span>
</code></pre></div></div>

<p>would make a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/inbox</code>, convert the resulting response into JSON, and then provide to you the array of emails inside of the variable <code class="highlighter-rouge">emails</code>. You can print that value out to the browser’s console using <code class="highlighter-rouge">console.log</code> (if you don’t have any emails in your inbox, this will be an empty array), or do something else with that array.</p>

<p>Note also that if you request an invalid mailbox (anything other than <code class="highlighter-rouge">inbox</code>, <code class="highlighter-rouge">sent</code>, or <code class="highlighter-rouge">archive</code>), you’ll instead get back the JSON response <code class="highlighter-rouge">{"error": "Invalid mailbox."}</code>.</p>

<a data-id="" id="get-emailsintemail_id" style="top: 0px;"></a><h4><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#get-emailsintemail_id"><code class="highlighter-rouge">GET /emails/&lt;int:email_id&gt;</code></a></h4>

<p>Sending a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/email_id</code> where <code class="highlighter-rouge">email_id</code> is an integer id for an email will return a JSON representation of the email, like the below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
        "id": 100,
        "sender": "foo@example.com",
        "recipients": ["bar@example.com"],
        "subject": "Hello!",
        "body": "Hello, world!",
        "timestamp": "Jan 2 2020, 12:00 AM",
        "read": false,
        "archived": false
}
</code></pre></div></div>

<p>Note that if the email doesn’t exist, or if the user does not have access to the email, the route instead return a 404 Not Found error with a JSON response of <code class="highlighter-rouge">{"error": "Email not found."}</code>.</p>

<p>To get email number 100, for example, you might write JavaScript code like</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/emails/100</span><span class="dl">'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">email</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Print email</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>

    <span class="c1">// ... do something else with email ...</span>
<span class="p">});</span>
</code></pre></div></div>

<a data-id="" id="post-emails" style="top: 0px;"></a><h4><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#post-emails"><code class="highlighter-rouge">POST /emails</code></a></h4>

<p>So far, we’ve seen how to get emails: either all of the emails in a mailbox, or just a single email. To send an email, you can send a <code class="highlighter-rouge">POST</code> request to the <code class="highlighter-rouge">/emails</code> route. The route requires three pieces of data to be submitted: a <code class="highlighter-rouge">recipients</code> value (a comma-separated string of all users to send an email to), a <code class="highlighter-rouge">subject</code> string, and a <code class="highlighter-rouge">body</code> string. For example, you could write JavaScript code like</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/emails</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="na">recipients</span><span class="p">:</span> <span class="dl">'</span><span class="s1">baz@example.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">subject</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Meeting time</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">How about we meet tomorrow at 3pm?</span><span class="dl">'</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Print result</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If the email is sent successfully, the route will respond with a 201 status code and a JSON response of <code class="highlighter-rouge">{"message": "Email sent successfully."}</code>.</p>

<p>Note that there must be at least one email recipient: if one isn’t provided, the route will instead respond with a 400 status code and a JSON response of <code class="highlighter-rouge">{"error": "At least one recipient required."}</code>. All recipients must also be valid users who have registered on this particular web application: if you try to send an email to <code class="highlighter-rouge">baz@example.com</code> but there is no user with that email address, you’ll get a JSON response of <code class="highlighter-rouge">{"error": "User with email baz@example.com does not exist."}</code>.</p>

<a data-id="" id="put-emailsintemail_id" style="top: 0px;"></a><h4><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#put-emailsintemail_id"><code class="highlighter-rouge">PUT /emails/&lt;int:email_id&gt;</code></a></h4>

<p>The final route that you’ll need is the ability to mark an email as read/unread or as archived/unarchived. To do so, send a <code class="highlighter-rouge">PUT</code> request (instead of a <code class="highlighter-rouge">GET</code>) request to <code class="highlighter-rouge">/emails/&lt;email_id&gt;</code> where <code class="highlighter-rouge">email_id</code> is the id of the email you’re trying to modify. For example, JavaScript code like</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/emails/100</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="na">archived</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<p>would mark email number 100 as archived. The body of the <code class="highlighter-rouge">PUT</code> request could also be <code class="highlighter-rouge">{archived: false}</code> to unarchive the message, and likewise could be either <code class="highlighter-rouge">{read: true}</code> or <code class="highlighter-rouge">read: false}</code> to mark the email as read or unread, respectively.</p>

<p>Using these four API routes (getting all emails in a mailbox, getting a single email, sending an email, and updating an existing email), you should have all the tools you now need to complete this project!</p>

<a data-id="" id="specification" style="top: 0px;"></a><h2><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#specification">Specification</a></h2>

<p>Using JavaScript, HTML, and CSS, complete the implementation of your single-page-app email client. You must fulfill the following requirements:</p>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><strong>Send Mail</strong>: When a user submits the email composition form, add JavaScript code to actually send the email.
    <ul class="fa-ul">
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>You’ll likely want to make a <code class="highlighter-rouge">POST</code> request to <code class="highlighter-rouge">/emails</code>, passing in values for <code class="highlighter-rouge">recipients</code>, <code class="highlighter-rouge">subject</code>, and <code class="highlighter-rouge">body</code>.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Once the email has been sent, load the user’s sent mailbox.</li>
    </ul>
  </li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><strong>Mailbox</strong>: When a user visits their Inbox, Sent mailbox, or Archive, load the appropriate mailbox.
    <ul class="fa-ul">
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>You’ll likely want to make a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/&lt;mailbox&gt;</code> to request the emails for a particular mailbox.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>When a mailbox is visited, the application should first query the API for the latest emails in that mailbox.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>When a mailbox is visited, the name of the mailbox should appear at the top of the page (this part is done for you).</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Each email should then be rendered in its own box (e.g. as a <code class="highlighter-rouge">&lt;div&gt;</code> with a border) that displays who the email is from, what the subject line is, and the timestamp of the email.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>If the email is unread, it should appear with a white background. If the email has been read, it should appear with a gray background.</li>
    </ul>
  </li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><strong>View Email</strong>: When a user clicks on an email, the user should be taken to a view where they see the content of that email.
    <ul class="fa-ul">
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>You’ll likely want to make a <code class="highlighter-rouge">GET</code> request to <code class="highlighter-rouge">/emails/&lt;email_id&gt;</code> to request the email.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Your application should show the email’s sender, recipients, subject, timestamp, and body.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>You’ll likely want to add an additional <code class="highlighter-rouge">div</code> to <code class="highlighter-rouge">inbox.html</code> (in addition to <code class="highlighter-rouge">emails-view</code> and <code class="highlighter-rouge">compose-view</code>) for displaying the email. Be sure to update your code to hide and show the right views when navigation options are clicked.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>See the hint in the Hints section about how to add an event listener to an HTML element that you’ve added to the DOM.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Once the email has been clicked on, you should mark the email as read. Recall that you can send a <code class="highlighter-rouge">PUT</code> request to <code class="highlighter-rouge">/emails/&lt;email_id&gt;</code> to update whether an email is read or not.</li>
    </ul>
  </li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><strong>Archive and Unarchive</strong>: Allow users to archive and unarchive emails that they have received.
    <ul class="fa-ul">
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>When viewing an Inbox email, the user should be presented with a button that lets them archive the email. When viewing an Archive email, the user should be presented with a button that lets them unarchive the email. This requirement does not apply to emails in the Sent mailbox.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Recall that you can send a <code class="highlighter-rouge">PUT</code> request to <code class="highlighter-rouge">/emails/&lt;email_id&gt;</code> to mark an email as archived or unarchived.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Once an email has been archived or unarchived, load the user’s inbox.</li>
    </ul>
  </li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span><strong>Reply</strong>: Allow users to reply to an email.
    <ul class="fa-ul">
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>When viewing an email, the user should be presented with a “Reply” button that lets them reply to the email.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>When the user clicks the “Reply” button, they should be taken to the email composition form.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Pre-fill the composition form with the <code class="highlighter-rouge">recipient</code> field set to whoever sent the original email.</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Pre-fill the <code class="highlighter-rouge">subject</code> line. If the original email had a subject line of <code class="highlighter-rouge">foo</code>, the new subject line should be <code class="highlighter-rouge">Re: foo</code>. (If the subject line already begins with <code class="highlighter-rouge">Re: </code>, no need to add it again.)</li>
      <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Pre-fill the <code class="highlighter-rouge">body</code> of the email with a line like <code class="highlighter-rouge">"On Jan 1 2020, 12:00 AM foo@example.com wrote:"</code> followed by the original text of the email.</li>
    </ul>
  </li>
</ul>

<a data-id="" id="hints" style="top: 0px;"></a><h2><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#hints">Hints</a></h2>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>To create an HTML element and add an event handler to it, you can use JavaScript code like the below:</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">This is the content of the div.</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">This element has been clicked!</span><span class="dl">'</span><span class="p">)</span>
<span class="p">});</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#container</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
</code></pre></div></div>

<p>This code creates a new <code class="highlighter-rouge">div</code> element, sets its <code class="highlighter-rouge">innerHTML</code>, adds an event handler to run a particular function when that <code class="highlighter-rouge">div</code> is clicked on, and then adds it to an HTML element whose <code class="highlighter-rouge">id</code> is <code class="highlighter-rouge">container</code> (this code assumes that there is a HTML element whose <code class="highlighter-rouge">id</code> is <code class="highlighter-rouge">container</code>: you’ll likely want to change the argument to <code class="highlighter-rouge">querySelector</code> to be whichever element you’d like to add an element to).</p>

<ul class="fa-ul">
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>You may find it helpful to edit <code class="highlighter-rouge">mail/static/mail/styles.css</code> to add any CSS you need for the application.</li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Recall that if you have a JavaScript array, you can loop over each element of that array using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach"><code class="highlighter-rouge">forEach</code></a>.</li>
  <li data-marker="*"><span class="fa-li"><i class="fas fa-circle"></i></span>Recall that normally, for <code class="highlighter-rouge">POST</code> and <code class="highlighter-rouge">PUT</code> requests, Django requires a CSRF token to guard against potential cross-site request forgery attacks. For this project, we’ve intentionally made the API routes CSRF-exempt, so you won’t need a token. In a real-world project, though, always best to guard against such potential vulnerabilities!</li>
</ul>

<a data-id="" id="how-to-submit" style="top: 0px;"></a><h2><a data-id="" href="https://cs50.harvard.edu/web/2020/projects/3/mail/#how-to-submit">How to Submit</a></h2>

<div class="alert alert-danger" data-alert="danger" role="alert">
  <p><strong>Hold on!</strong> If you have already submitted and received a passing grade on the <a href="https://docs.cs50.net/web/2020/x/projects/2/project2.html" class="alert-link">prior version of Project 2</a> (Flack), please stop here. You already have received an equivalence credit for this project, and you should not submit this assignment, as it will have no impact on your progress in the course and will therefore only slow our graders down!</p>
</div>

<ol>
  <li>Visit <a href="https://submit.cs50.io/invites/89679428401548238ceb022f141b9947">this link</a>, log in with your GitHub account, and click <strong>Authorize cs50</strong>. Then, check the box indicating that you’d like to grant course staff access to your submissions, and click <strong>Join course</strong>.</li>
  <li><a href="https://git-scm.com/downloads">Install Git</a> and, optionally, <a href="https://cs50.readthedocs.io/submit50/">install <code class="highlighter-rouge">submit50</code></a>.</li>
</ol>

<div class="alert alert-success" data-alert="success" role="alert">
  <p>When you submit your project, the contents of your <code class="highlighter-rouge">web50/projects/2020/x/mail</code> branch should match the file structure of the unzipped distribution code as originally received. That is to say, your files should not be nested inside of any other directories of your own creation. Your branch should also not contain any code from any other projects, only this one. Failure to adhere to this file structure will likely result in your submission being rejected.</p>

<p>By way of example, for this project that means that if the grading staff visits <code class="highlighter-rouge">https://github.com/me50/USERNAME/tree/web50/projects/2020/x/mail</code> (where <code class="highlighter-rouge">USERNAME</code> is your own GitHub username as provided in the form, below) we should see the two subdirectories (<code class="highlighter-rouge">mail</code>, <code class="highlighter-rouge">project3</code>) and the <code class="highlighter-rouge">manage.py</code> file. If that’s not how your code is organized when you check, reorganize your repository needed to match this paradigm.</p>
</div>

<ol start="3">
  <li>If you’ve installed <code class="highlighter-rouge">submit50</code>, execute
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>submit50 web50/projects/2020/x/mail
</code></pre></div>    </div>
    <p>Otherwise, using Git, push your work to <code class="highlighter-rouge">https://github.com/me50/USERNAME.git</code>, where <code class="highlighter-rouge">USERNAME</code> is your GitHub username, on a branch called <code class="highlighter-rouge">web50/projects/2020/x/mail</code>.</p>
  </li>
  <li><a href="https://www.howtogeek.com/205742/how-to-record-your-windows-mac-linux-android-or-ios-screen/">Record a screencast</a> not to exceed 5 minutes in length, in which you demonstrate your project’s functionality. Be certain that every element of the specification, above, is demonstrated in your video. There’s no need to show your code in this video, just your application in action; we’ll review your code on GitHub. <a href="https://www.youtube.com/upload">Upload that video to YouTube</a> (as unlisted or public, but not private) or somewhere else. In your video’s description, you must timestamp where your video demonstrates each of the five (5) elements of the specification. <strong>This is not optional</strong>, videos without timestamps in their description will be automatically rejected.</li>
  <li>Submit <a href="https://forms.cs50.io/bb539ded-f0e8-452f-8100-d4fe6c41266d">this form</a>.</li>
</ol>

<p>You can then go to <a href="https://cs50.me/cs50w">https://cs50.me/cs50w</a> to view your current progress!</p>


                </main>

            </div>

        </div>

        
 
    


</body></html>